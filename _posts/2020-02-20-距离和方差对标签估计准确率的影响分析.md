---
layout:     post
title:      距离和方差对标签估计准确率的影响分析
subtitle:   方差实验组
date:       2020-02-20
author:     JoselynZhao
header-img: img/post-bg-coffee.jpeg
catalog: true
tags:
    - 科研之路
---

# 通用说明
- model0-model10，训练程度加深。
- 横坐标为未标注样本。
- distance 指的是各个样本的与带标注样本的最小欧几里得距离。
- variance 指的是各个样本与其距离最近的两个带标注样本的距离方差。
- FN_acc（n<U）表示前n个未标注样本标签估计的准确率。其中U=len(u_data)
- acc_list 是bool数值，长度为U, 如果acc_list[i]=1, 表示第i个样本标签估计正确。
# 数据分析
## Fig.1 sorted distance

![image](http://note.youdao.com/yws/res/46927/WEBRESOURCEf6efc1d4e7aa9c2b3e89f4bc67c08465)

### 说明
- 将distance 按照从小到大的顺序绘制出来。
- 符合我们在选择伪标签样本时，距离小的优先的原则。
### 分析
- 从model1-model10，distance减小。说明未标注样本逐渐接近属于类别的带标注样本。
- 曲线的等间距下滑，是因为样本一旦加入训练集，下一次其与带标注样本之间的距离就会大大减小。

## Fig.2 FN_acc sort by distance

![image](http://note.youdao.com/yws/res/46928/WEBRESOURCE908687fe7e9ccb2b08790a59affc3b56)


### 说明
- 获取distance 从小打大排序的index，并将对应的acc_list按照该index来进行排序。
- 根据排序后的acc_list，绘制出FN_acc曲线。
### 分析
- 从model1-model10，FN_acc呈现上升趋势，也就是说，随着模型训练程度的加深，标签估计的整体选准确率得到了提升，但增长率逐渐减小。
- distance从小到大，FN_acc逐渐减小，说明distance越大，标签估计错误的可能性越大。


## Fig.3 sorted variance

![image](http://note.youdao.com/yws/res/46929/WEBRESOURCE3a3fbf06655c362083bfeccf5b488f08)


### 说明
- 将variance 按照从大到小的顺序绘制出来。
- 符合我们在选择伪标签样本时，方差大的优先的原则。
### 分析
- 从model1-model10，方差增大。说明未标注样本与所属类别样本的距离和其他样本的距离之间的差距变大，逐渐接近属于类别的带标注样本。
- 曲线的等间距上升，是因为样本一旦加入训练集，下一次其与带标注样本之间的距离就会大大减小，而variance就会明显增大。

## Fig.4 FN_acc sort by variance
![image](http://note.youdao.com/yws/res/46930/WEBRESOURCE4d6208daa6b95276e3e183de3bca2841)

### 说明
- 获取variance 从大到小排序的index，并将对应的acc_list按照该index来进行排序。
- 根据排序后的acc_list，绘制出FN_acc曲线。
### 分析
- 从model0-model10，FN_acc呈现上升趋势，也就是说，随着模型训练程度的加深，标签估计的整体选准确率得到了提升，但增长率逐渐减小。
- variance 从大到小，FN_acc逐渐减小，说明方差越小，标签估计错误的可能性越大。

## Fig.5 variance sort by distance (all)
![image](http://note.youdao.com/yws/res/47028/WEBRESOURCEe2a857e1117fd76fa3371079d69d8c70)


### 说明
- 获取distance从小到大排序后的index
- 根据获取的index 绘制variance曲线
### 分析
- 图中的整体分布和图3保持相同的分布。也就是说，在distance从小到大的情况下， 方差总体上保持着从大到小的趋势。
- 在distance从小到大的情况下， 方差值虽然总体上呈现从大到小的趋势，但是摆动性很大。==后续思考这些摆动值和标签估计正误的关系==


## Fig.6 variance sort by distance (independent)
![image](http://note.youdao.com/yws/res/47031/WEBRESOURCE00e7d088f20e03c055d642d5debae6f0)

### 说明
*与Fig.5 相同，只是把不同的model的图像，拆分到了不同的子图*



## Fig.7 distance change of models

![image](http://note.youdao.com/yws/res/47069/WEBRESOURCE965e2b528d621392a680889379327194)

### 说明
- 比较具有不同训练程度的models的distance的值的变化。
- 图中，dists1 和dists2 是单纯的按照从小到大排序后绘制出来的。dists2 sorded by dists1 表示 dists2 按照dists1 升序索引绘制，dists3 sorted by dists2 表示dists3 按照dists2 升序索引绘制。
- 目的是为了看出同一个样本在前后两个models中，distance的变化情况。

### 分析
- 从绿色和橙色曲线我们可以看出，前200个样本加入到训练集之后，其distance明显减小了，而后面没有加入训练集的样本，其distance值围绕训练前的distance值摆动。
- 从红色和蓝色曲线我们可以看出，已经加入模型训练过的部分，后续的dists不会再发生大的变动了。仍旧是新加入的部分的dists发生明显的下降。


## Fig.8 relationship between varince and dists


![image](http://note.youdao.com/yws/res/47093/WEBRESOURCEec313d6445b56c328327dc6618f2e2a4)

### 说明
- 按照dists的升序索引 绘制variance 和 FN_acc曲线
### 分析
- 总体上，随着dists的增大，variance减小， 标签估计准确率下降。
