
---
layout:     post
title:      测试在EF较大（EF=15）的情况下的方差二次采样的效果
subtitle:   方差实验组
date:       2020-02-23
author:     JoselynZhao
header-img: img/post-bg-coffee.jpeg
catalog: true
tags:
    - 科研之路
---


# 总体说明
- EF = 15
- 论文中baseline的数据入下：
 ![image](http://note.youdao.com/yws/res/47682/2C6C945DB560479FB8E6A0D9AF7EB1E3)

- 将mars和duke两个数据集的运行结果保存在'gradually_EF15目录下'。
- 运行文件 master/main.py , 运行命令:
```
python3.6 main.py --exp_name gradually_EF15 --EF 15 --q 1  --exp_order 0 --dataset xxx
```


- 别分绘制出两个数据集下的性能曲线图。
- 进行==数据分析==，先用analysis.py 获取各项npy数据。再用analysis_data_handle.py进行function1-function10的数据可视化。


# 模型性能结果
## duKe
![image](http://note.youdao.com/yws/res/47755/WEBRESOURCE76072ed9157f3781d28b1047d5682e8a)
![image.png](http://note.youdao.com/yws/res/47757/WEBRESOURCEa518b72003b89df898dfa782a2dbedeb)

与论文中的数据相比，![image](http://note.youdao.com/yws/res/47765/9B5B900DCC2D4A538EAB1DA6E7F348ED)，==mAP 提高了1.84， rank-1 提高了1.01==.

## mars
![image](http://note.youdao.com/yws/res/47762/WEBRESOURCE046580b5eb84e36206bb6e39975b6c14)
![image.png](http://note.youdao.com/yws/res/47759/WEBRESOURCE560be53fb2b6e60831e2b3843affa39f)

与论文中的数据相比，![image](http://note.youdao.com/yws/res/47771/18DD17315DB94A0D820C2F39E5C5A5EF)，==mAP提高了2.85， top1提高了3.74==.


# 数据分析的可视化结果
> 运行analysis_data_handel.py 的function1-function10
## Duke
### function1：
![image](http://note.youdao.com/yws/res/47791/WEBRESOURCEa5690db9013c598ef16c8fdcc9efca13)
![image](http://note.youdao.com/yws/res/47792/WEBRESOURCEae5a0eab3e9daf85f1270f8bfe0b6b38)
### function2：
![image](http://note.youdao.com/yws/res/47795/WEBRESOURCEf4056a50f7f33945cd9d8a7065da5178)
![image](http://note.youdao.com/yws/res/47796/WEBRESOURCE7ce8c0de46ec1f7d60c35af2da61217b)

### function3：
![image](http://note.youdao.com/yws/res/47798/WEBRESOURCE4f4bd735fb26f5f4dab90ed97c18fa1f)
![image](http://note.youdao.com/yws/res/47799/WEBRESOURCE1e0ecf32bbdec6a142669f5b832d24e6)
### function4：

![image](http://note.youdao.com/yws/res/47801/WEBRESOURCEf394e2773c320bc94e1f98563cb48c7d)
### function5：


![image](http://note.youdao.com/yws/res/47803/WEBRESOURCE991230effadd9ce02859b93709018607)
### function6：
![image](http://note.youdao.com/yws/res/47813/WEBRESOURCE9712922666f88864996559f04f192a25)


### function8：
![image.png](http://note.youdao.com/yws/res/47815/WEBRESOURCE83370db035cb3bce5554839fd290bd87)
![image](http://note.youdao.com/yws/res/47818/WEBRESOURCE800ce5c8c0a50d4fe9ece1bce0742828)![image](http://note.youdao.com/yws/res/47819/WEBRESOURCE4f21bb364540ff13b6a29078921734c1)![image](http://note.youdao.com/yws/res/47820/WEBRESOURCE5ad5d8fdade4a34d5dc6291a4a3581c9)![image](http://note.youdao.com/yws/res/47821/WEBRESOURCE044a85db6313f29fc481caa03b2f3151)![image](http://note.youdao.com/yws/res/47822/WEBRESOURCEca78aa293f4e4055be6ef6b087a58d5b)![image](http://note.youdao.com/yws/res/47824/WEBRESOURCE279d2a333413efa4ed9347d6a161a81e)![image](http://note.youdao.com/yws/res/47825/WEBRESOURCE8d4d330720f4ff845fd7d9f00ae5a3b1)![image](http://note.youdao.com/yws/res/47826/WEBRESOURCEb05939d79322dd78a00c6ef7b58a650f)
### function9：

![image](http://note.youdao.com/yws/res/47879/WEBRESOURCEaa513e3931d823dc767540f1caa560e6)
### function10：
![image](http://note.youdao.com/yws/res/47880/WEBRESOURCE27e19ddb632c81d3a609f15362e54b26)

### 数据分析
![image](http://note.youdao.com/yws/res/47890/WEBRESOURCE3bad61783e6d075891bafa854d0b5d79)

### 最终参数设定

 || 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 |
---|---|---|---|---|---|---|---|---
query_rate| 0.3 |0.4|0.5|0.6|0.7|0.8|0.9|-|
expand_rate | 1.3| 1.2|1.1|1.08|1.06|1.04|1.02| -






## Mars:
### function1：
![image](http://note.youdao.com/yws/res/47835/WEBRESOURCEa0a730acb0b1f20a2ce3f4995d3aa2cf)![image](http://note.youdao.com/yws/res/47836/WEBRESOURCEc824f16ceb427829684782e049e6595c)
### function2：
![image](http://note.youdao.com/yws/res/47838/WEBRESOURCE895788fc8a1122e3203ae454820e9b82)![image](http://note.youdao.com/yws/res/47839/WEBRESOURCE0bade69dca639325b869c83aea768708)

### function3：
![image](http://note.youdao.com/yws/res/47841/WEBRESOURCE619267c7fee56ec6e41e94c1279eb871)![image](http://note.youdao.com/yws/res/47842/WEBRESOURCEefba2d508170978658531bba44429b0b)

### function4：
![image](http://note.youdao.com/yws/res/47845/WEBRESOURCEf145df5caf3d662114fc864dcf9d3579)

### function5：

![image](http://note.youdao.com/yws/res/47847/WEBRESOURCE7a2aa033be0404187e0219873f3ede4d)
### function6：

![image](http://note.youdao.com/yws/res/47849/WEBRESOURCE53bb83b279c253accf739cd35e2fc64d)

### function8：
![image.png](http://note.youdao.com/yws/res/47851/WEBRESOURCEe2f139a2727686ad0913186edc04fc72)![image](http://note.youdao.com/yws/res/47853/WEBRESOURCE1aeb63c2c3ae4e0af2da431d54190b7f)![image](http://note.youdao.com/yws/res/47854/WEBRESOURCE3ef0beba7c9dcea1dfa9a477e46ae299)![image](http://note.youdao.com/yws/res/47856/WEBRESOURCE726b327c46cccbe48a00a06c23924b02)![image](http://note.youdao.com/yws/res/47857/WEBRESOURCE3b675337a324705b588925e24ba9cf27)![image](http://note.youdao.com/yws/res/47858/WEBRESOURCE85429246b7d82757fa84ada7837b6d7c)![image](http://note.youdao.com/yws/res/47859/WEBRESOURCE2a4970e9e01985879140a3f735b3b56b)![image](http://note.youdao.com/yws/res/47860/WEBRESOURCE324be25e8332d8479d9b1c7b4b5c94d5)![image](http://note.youdao.com/yws/res/47861/WEBRESOURCE29b0d6aa1319a6c04d6b71190d2056a5)
### function9：
![image](http://note.youdao.com/yws/res/47882/WEBRESOURCE9c4cf27bce14053d0b1f4db4bd52463e)

### function10：

![image](http://note.youdao.com/yws/res/47883/WEBRESOURCE7c9aca0af2a39695906c8a10942af02b)


### 最终参数设定

 || 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 |
---|---|---|---|---|---|---|---|---
query_rate|0.4|0.5|0.6|0.7|0.8|0.9|-|-|
expand_rate | 1.2|1.1|1.08|1.06|1.04|1.02| -|-
